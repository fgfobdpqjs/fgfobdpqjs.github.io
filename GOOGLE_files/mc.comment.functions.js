var comment_nowpage=1,comment_selfonly=0,comment_quote=0,isCommitSetup={};function get_comment(t,e){if(!t||!e)return!1;var a={};a.type=e,a.channel=comment_channel,a.doid=t,a.page=comment_nowpage,a.selfonly=comment_selfonly;var n=JSON.stringify(a),o=$.ajax({url:"//"+strStaticUrl+"/frame/comment/CommentRow/",async:!0,cache:!1,data:{data:n},type:"post",xhrFields:{withCredentials:!0},crossDomain:!0,beforeSend:function(){$(".comment-row").css("opacity",.5)},complete:function(){var t="",a="";if(o.responseText){var n=$.parseJSON(o.responseText);if(0==n.state){function i(){$(".comment-row-text-content").each(function(){$(this).height()>300?($(this).parent().next().hasClass("fold")||$(this).parent().next().before('<a class="fold text-muted"><i class="fas fa-chevron-down"></i>'+PublicLangData.comment.fold.down+"</a>"),$(this).next(".fold").show()):$(this).next(".fold").hide()})}1==n.data.is_empty?t+="center"==e?'<li class="none">'+PublicLangData.comment.empty.center+"</li>":'<li class="none">'+PublicLangData.comment.empty.common+"</li>":(void 0!==n.data.page&&n.data.page&&(a=get_page_html(n.data.page)),n.data.row.forEach(function(e,a){var o="",i="";if(e.skip&&(o=" skip"),t+='<li class="comment-row'+o+'"><div class="comment-row-userinfo">',void 0!==e.user.avatar.frame&&e.user.avatar.frame.length>0&&(i=' style="background-image:url(/static/public/images/user/frame/'+e.user.avatar.frame+'/frame_58x.png)"'),e.user.id>0?t+='<div class="frame"'+i+' data-uid="'+e.user.id+'"><a rel="nofollow" title="'+e.user.name+'" target="_blank" href="//center.mcmod.cn/'+e.user.id+'/"><img alt="'+e.user.name+'" src="'+e.user.avatar.img+'" width="100" height="100"/></a></div>'+e.floor:t+='<img title="'+e.user.name+'" alt="'+e.user.name+'" src="'+e.user.avatar.img+'" width="100" height="100"/>'+e.floor,t+='</div><div class="comment-row-content"><ul class="comment-row-username">',e.user.id>0){t+='<li><a rel="nofollow" target="_blank" href="//center.mcmod.cn/'+e.user.id+'/" data-uid="'+e.user.id+'">'+e.user.name+"</a></li>";const a=new Date;if("class"!=comment_type&&"item"!=comment_type||a.getMonth()+1!=4||1!=a.getDate()||void 0===e.is_owner||!e.is_owner)switch(e.user.sp){case 1:t+='<li><a rel="nofollow" href="//center.mcmod.cn/'+e.user.id+'/#/rank/" target="_blank" title="'+PublicLangData.comment.suffix.post_author+" (Lv."+e.user.lv+')" class="common-user-lv post-author">'+PublicLangData.comment.suffix.post_author+"</a></li>";break;case 2:t+='<li><a rel="nofollow" href="//center.mcmod.cn/'+e.user.id+'/#/rank/" target="_blank" title="'+PublicLangData.comment.suffix.mod_developer+" (Lv."+e.user.lv+')" class="common-user-lv developer">'+PublicLangData.comment.suffix.mod_developer+"</a></li>";break;case 3:t+='<li><a rel="nofollow" href="//center.mcmod.cn/'+e.user.id+'/#/rank/" target="_blank" title="'+PublicLangData.comment.suffix.mod_manager+" (Lv."+e.user.lv+')" class="common-user-lv manager">'+PublicLangData.comment.suffix.mod_manager+"</a></li>";break;case 4:t+='<li><a rel="nofollow" href="//center.mcmod.cn/'+e.user.id+'/#/rank/" target="_blank" title="'+PublicLangData.comment.suffix.mod_admin+" (Lv."+e.user.lv+')" class="common-user-lv admin">'+PublicLangData.comment.suffix.mod_admin+"</a></li>";break;default:t+='<li><a rel="nofollow" href="//center.mcmod.cn/'+e.user.id+'/#/rank/" target="_blank" title="Lv.'+e.user.lv+'" class="common-user-lv lv-'+e.user.lv+'">Lv.'+e.user.lv+"</a></li>"}else t+='<li><a rel="nofollow" href="//t.bilibili.com/779290398405165095" target="_blank" title="'+PublicLangData.comment.suffix.mod_manager+" (Lv."+e.user.lv+')" class="common-user-lv manager">'+PublicLangData.comment.suffix.mod_manager+"</a></li>"}else t+=e.user.name;if(void 0!==e.user.wap&&e.user.wap&&(t+='<li><a href="javascript:void(0);" title="'+PublicLangData.comment.suffix.phone+'" class="phone"></a></li>'),t+='</ul><div class="comment-row-text">',e.skip&&(t+='<blockquote class="comment-skip-block">'+sprintf(PublicLangData.comment.skip,e.skip)+"</blockquote>"),void 0!==e.quote&&void 0!==e.quote.state){var c="";switch(e.quote.state){case 1:c='<span class="text-muted">***'+PublicLangData.comment.delete.state.self+"***</span>";break;case 2:c='<span class="text-muted">***'+PublicLangData.comment.delete.state.admin+"***</span>";break;case 3:c='<span class="text-muted">***'+PublicLangData.comment.delete.state.notfound+"***</span>";break;default:c=e.quote.content}t+='<blockquote class="comment-quote-block">('+sprintf(PublicLangData.comment.floor,e.quote.floor)+") "+e.quote.name+": "+c+"</blockquote>"}t+='<div class="comment-row-text-content common-text font14">'+e.content+"</div>",t+="</div>";var m="";if(m+='<li title="'+e.time.range+'" class="comment-reply-row-time">'+e.time.source+"</li>",n.data.is_login>0&&(m+='<li><a class="comment-reply" href="javascript:void(0);"><i class="fa fa-reply"></i>'+PublicLangData.comment.reply.button+"</a></li>"),n.data.is_login>1&&(m+='<li><a class="comment-quote" href="javascript:void(0);"><i class="fas fa-quote-left"></i>'+PublicLangData.comment.quote.button+"</a></li>"),void 0!==e.attitude){var s="",l="";Object.keys(PublicLangData.comment.attitude).forEach(function(t,a){var n=0,o=get_attitude_icon(t),i=' style="display:none;"';e.attitude[t]&&(n=e.attitude[t],i="");var c="";e.attitude.use==t&&(c=" colourful"),s+='<li title="'+PublicLangData.comment.attitude[t]+'"'+i+'><a href="javascript:void(0);" class="comment-attitude '+t+c+'" data-type="'+t+'">'+o+"<span>"+n+"</span></a></li>",void 0!==e.is_owner&&e.is_owner||(l+='<li><a title="'+PublicLangData.comment.attitude[t]+'" href="javascript:void(0);" class="comment-attitude '+t+'" data-type="'+t+'">'+o+"</a></li>")}),s&&(m+='<ol class="comment-attitude-result">'+s+"</ol>"),n.data.is_login>0&&(m+='<span class="comment-delimiter"></span>'),n.data.is_login>0&&l&&(m+='<li title="'+PublicLangData.comment.attitude_button+'" class="comment-attitude-list"><a class="comment-attitude-list-button" href="javascript:void(0);"><i class="fas fa-smile-o"></i><i class="fas fa-caret-up"></i></a><div class="comment-attitude-list-hover"><ul>'+l+"</ul></div></li>")}void 0!==e.top&&(0==e.top?m+='<li><a class="comment-top" href="javascript:void(0);"><i class="fas fa-hand-o-up"></i>'+PublicLangData.comment.top.button.confirm+"</a></li>":m+='<li><a class="comment-top" href="javascript:void(0);"><i class="fas fa-hand-o-up"></i>'+PublicLangData.comment.top.button.cancel+"</a></li>"),void 0!==e.access&&1==e.access&&(m+='<li><a class="comment-delete" href="javascript:void(0);"><i class="fas fa-trash-alt"></i>'+PublicLangData.comment.delete.button+"</a></li>"),void 0!==e.report&&1==e.report&&(m+='<li><a class="comment-report" href="javascript:void(0);"><i class="fas fa-flag"></i>'+PublicLangData.comment.report.button+"</a></li>"),m&&(t+='<ul class="comment-tools"><input class="comment-id" name="comment-id" value="'+e.id+'" type="hidden" />'+m+"</ul>"),e.reply_count>0&&(t+='<div class="comment-reply-floor"></div>'),t+="</div></div></li>"})),$(".common-comment-block .comment-floor").html(a+t+a),function(){switch(comment_channel){case"1":0==comment_user_id?($(".comment-editor-area").hide(),$(".comment-limit").show(),$(".comment-limit").html(sprintf(PublicLangData.comment.channel.unlogin[1],'<a target="_blank" href="//www.mcmod.cn/login/">',"</a>"))):($(".comment-editor-area").show(),$(".comment-limit").hide());break;case"2":comment_user_wordnum<2e3||comment_user_editnum<70?($(".comment-editor-area").hide(),$(".comment-limit").show(),$(".comment-limit").html(PublicLangData.comment.channel.unlogin[2])):($(".comment-editor-area").show(),$(".comment-limit").hide());break;case"3":comment_user_id>0?($(".comment-editor-area").hide(),$(".comment-limit").show(),$(".comment-limit").html(PublicLangData.comment.channel.unlogin[3])):($(".comment-editor-area").show(),$(".comment-limit").hide());break;default:;}}(),$(".comment-row-text-content img").each(function(){var t=$(this).attr("src");t.search(/.*\/ueditor\/dialogs\/emotion\/images\/.*/gi)>-1&&$(this).removeAttr("width").removeAttr("height"),$(this).load(function(){i()})}),i(),get_user_card($(".comment-floor .comment-row-userinfo .frame:not(.poped), .comment-floor .comment-row-username li a:not(.common-user-lv,.phone,.poped)")),$(window).resize(function(){i()}),$(".comment-reply-floor").each(function(){var t=$(this),e=t.prev().children(".comment-id").val();isCommitSetup[e]=!1,$(window).scroll(function(){!isCommitSetup[e]&&0==t.text().length&&$(window).scrollTop()>t.offset().top-$(window).height()&&(isCommitSetup[e]=!0,get_reply_comment(t,e,1,!0))})});try{$(".comment-floor [data-toggle='tooltip']").tooltip({animation:!1}),common_imgview($(".comment-floor .common-text"))}catch(t){}}else common_msg(PublicLangData.warning.inform.title,PublicLangData.warning.inform[n.state],"err")}$(".comment-row").css("opacity","")}})}function get_reply_comment(t,e,a,n){if(!t||!e||!a)return!1;var o={};o.replyID=e,o.page=a;var i=JSON.stringify(o),c=$.ajax({url:"//"+strStaticUrl+"/frame/comment/CommentReply/",async:!0,type:"post",data:{data:i},xhrFields:{withCredentials:!0},crossDomain:!0,beforeSend:function(){n&&t.html('<img alt="loading" src="//www.mcmod.cn/static/public/images/loading-colourful.gif" width="32" height="32" />')},complete:function(){var e="",a="";if(c.responseText){var n=$.parseJSON(c.responseText);0==n.state&&void 0!==n.data.row&&n.data.row&&(void 0!==n.data.page&&n.data.page&&(a=get_page_html(n.data.page)),n.data.row.forEach(function(t,a){e+='<div class="comment-reply-row"><div class="comment-reply-row-avatar" data-uid="'+t.user.id+'">',t.user.id>0?e+='<a rel="nofollow" title="'+t.user.name+'" target="_blank" href="//center.mcmod.cn/'+t.user.id+'/"><img alt="'+t.user.name+'" src="'+t.user.avatar.img+'" /></a>':e+='<img title="'+t.user.name+'" alt="'+t.user.name+'" src="'+t.user.avatar.img+'" />',e+='</div><div class="comment-reply-row-username">',t.user.id>0?e+='<a rel="nofollow" target="_blank" href="//center.mcmod.cn/'+t.user.id+'/" data-uid="'+t.user.id+'">'+t.user.name+'</a><a rel="nofollow" href="//center.mcmod.cn/'+t.user.id+'/#/rank/" target="_blank" title="Lv.'+t.user.lv+'" class="common-user-lv lv-'+t.user.lv+'">Lv.'+t.user.lv+"</a>":e+=t.user.name;var o="";void 0!==t.reply_user&&t.reply_user&&(o=sprintf(PublicLangData.comment.reply.holder,'<a rel="nofollow" href="//center.mcmod.cn/'+t.reply_user.id+'/" target="_blank">',t.reply_user.name+"</a>"));var i="";if(i+='<li title="'+t.time.range+'" class="comment-reply-row-time">'+t.time.source+"</li>",n.data.is_login>0&&(i+='<li><a class="comment-reply" href="javascript:void(0);"><i class="fa fa-reply"></i>'+PublicLangData.comment.reply.button+"</a></li>"),void 0!==t.attitude){var c="",m="";Object.keys(PublicLangData.comment.attitude).forEach(function(e,a){var n=0,o=get_attitude_icon(e),i=' style="display:none;"';t.attitude[e]&&(n=t.attitude[e],i="");var s="";t.attitude.use==e&&(s=" colourful"),c+='<li title="'+PublicLangData.comment.attitude[e]+'"'+i+'><a href="javascript:void(0);" class="comment-attitude '+e+s+'" data-type="'+e+'">'+o+"<span>"+n+"</span></a></li>",void 0!==t.is_owner&&t.is_owner||(m+='<li><a title="'+PublicLangData.comment.attitude[e]+'" href="javascript:void(0);" class="comment-attitude '+e+'" data-type="'+e+'">'+o+"</a></li>")}),c&&(i+='<ol class="comment-attitude-result">'+c+"</ol>"),n.data.is_login>0&&(i+='<span class="comment-delimiter"></span>'),n.data.is_login>0&&m&&(i+='<li title="'+PublicLangData.comment.attitude_button+'" class="comment-attitude-list"><a class="comment-attitude-list-button" href="javascript:void(0);"><i class="fas fa-smile-o"></i><i class="fas fa-caret-up"></i></a><div class="comment-attitude-list-hover"><ul>'+m+"</ul></div></li>")}void 0!==t.access&&1==t.access&&(i+='<li><a class="comment-delete" href="javascript:void(0);"><i class="fas fa-trash-alt"></i>'+PublicLangData.comment.delete.button+"</a></li>"),void 0!==t.report&&1==t.report&&(i+='<li><a class="comment-report" href="javascript:void(0);"><i class="fas fa-flag"></i>'+PublicLangData.comment.report.button+"</a></li>"),i&&(i='<ul class="comment-tools"><input class="comment-id" name="comment-id" value="'+t.id+'" type="hidden" />'+i+"</ul>"),e+='</div><div class="comment-reply-row-text-content common-text font14">'+o+t.content+"</div>"+i+"</div>"}),t.html(e+a),get_user_card($(".comment-reply-floor .comment-reply-row-avatar:not(.poped), .comment-reply-floor .comment-reply-row-username a:not(.common-user-lv,.poped)")))}},error:function(t,e){connect_error(e)},timeout:timmeLimit})}function get_page_html(t){var e="";return void 0!==t.home&&t.home&&(e+='<li class="page-item"><a class="page-link" href="javascript:void(0);" data-page="1">'+PublicLangData.pages.home+"</a></li>"),void 0!==t.prev&&t.prev&&(e+='<li class="page-item"><a class="page-link" href="javascript:void(0);" data-page="'+t.prev+'">'+PublicLangData.pages.prev+"</a></li>"),void 0!==t.list&&t.list&&t.list.forEach(function(a,n){t.now_page==a?e+='<li class="page-item active"><a class="page-link" href="javascript:void(0);">'+a+"</a></li>":e+='<li class="page-item"><a class="page-link" href="javascript:void(0);" data-page="'+a+'">'+a+"</a></li>"}),void 0!==t.next&&t.next&&(e+='<li class="page-item"><a class="page-link" href="javascript:void(0);" data-page="'+t.next+'">'+PublicLangData.pages.next+"</a></li>"),void 0!==t.end&&t.end&&(e+='<li class="page-item"><a class="page-link" href="javascript:void(0);" data-page="'+t.end+'">'+PublicLangData.pages.end+"</a></li>"),e+="<span>"+sprintf(t.count_lang,t.now_page,t.total_page,t.total_row)+"</span>",e='<ul class="pagination common-pages" data-name="'+t.name+'">'+e+"</ul>"}function get_attitude_icon(t){switch(icon="",t){case"up":icon='<i class="fas fa-thumbs-up"></i>';break;case"grintears":icon='<i class="fas fa-grin-tears"></i>';break;case"heart":icon='<i class="fas fa-heart"></i>';break;case"flushed":icon='<i class="fas fa-flushed"></i>';break;case"down":icon='<i class="fas fa-thumbs-down"></i>';break;case"lemon":icon='<i class="fas fa-lemon"></i>';break;case"horsehead":icon='<i class="fas fa-horse-head"><sup>?</sup></i>';break;case"heartbroken":icon='<i class="fas fa-heart-broken"></i>';break;case"angry":icon='<i class="fas fa-angry"></i>';break;case"tired":icon='<i class="fas fa-tired"></i>';break;case"snowflake":icon='<i class="fas fa-snowflake"></i>';break;case"handshake":icon='<i class="fas fa-handshake"></i>'}return icon}isCommitSetup[0]=!1,setTimeout(function(){$(window).scroll()},1),$(document).ready(function(){setTimeout(function(){$(window).scroll()},1)}),$(window).scroll(function(){if($(".common-comment-block.lazy").length>0&&!isCommitSetup[0]&&0==$(".common-comment-block.lazy").text().length&&$(window).scrollTop()>$(".common-comment-block.lazy").offset().top-$(window).height()){isCommitSetup[0]=!0;var t={};t.comment_type=comment_type,t.comment_container=comment_container;var e=JSON.stringify(t),a=$.ajax({url:"//"+strStaticUrl+"/frame/comment/CommentFrame/",async:!0,type:"post",data:{data:e},xhrFields:{withCredentials:!0},crossDomain:!0,beforeSend:function(){},complete:function(){$(".common-comment-block").html(a.responseText)},error:function(t,e){connect_error(e)},timeout:timmeLimit})}}),$(document).on("click",".comment-row .comment-tools .comment-reply",function(){var t=$(this).parents(".comment-tools"),e=t.prevAll(".comment-row-username,.comment-reply-row-username").find("a:eq(0)").text();if(t.next().hasClass("comment-reply-input-block"))t.next().remove();else{var a=t.children(".comment-id").val();if(!parseInt(a))return common_msg(PublicLangData.warning.inform.title,PublicLangData.warning.inform[101],"err"),!1;$(".comment-reply-input-block").remove(),t.after('<div class="comment-reply-input-block"><textarea class="form-control comment-reply-text" rows="5" placeholder="'+sprintf(PublicLangData.comment.reply.holder,"",e)+'"></textarea><input class="btn btn-success btn-sm comment-reply-submit" value="'+PublicLangData.comment.reply.button+'" type="button" /></div>');var n=t.next();n.children(".comment-reply-submit").bind("click",function(){var e=$(this);if(!e.hasClass("disabled")){var o=n.children(".comment-reply-text").val().trim(),i=removeHtmlTag(o).length;if(i.length<3)return common_msg(PublicLangData.remind,PublicLangData.comment.submit.empty,"tip"),!1;if(i.length>5e3)return common_msg(PublicLangData.remind,PublicLangData.comment.submit.full,"tip"),!1;o=(o=o.replace(/\r\n/g,"<br/>")).replace(/\n/g,"<br/>");var c={todo:"submit"};c.type=comment_type,c.channel=comment_channel,c.container=comment_container,c.reply=a,c.text=o;var m=JSON.stringify(c),s=$.ajax({url:"//"+strStaticUrl+"/action/doComment/",async:!0,type:"post",data:{data:m},xhrFields:{withCredentials:!0},crossDomain:!0,beforeSend:function(){e.removeClass("btn-success").addClass("btn-secondary").addClass("disabled").val(PublicLangData.loading+"..")},complete:function(){if(s.responseText){var a=$.parseJSON(s.responseText);if(0==a.state){if(e.parents(".comment-reply-row").length>0)var n=(i=e.parents(".comment-reply-floor")).prev().children(".comment-id").val();else{var o=e.parents(".comment-reply-input-block");0==o.next().length&&o.after('<div class="comment-reply-floor"></div>');var i=o.next();n=o.prev().children(".comment-id").val()}t.next().remove(),get_reply_comment(i,n,1,!1)}else common_msg(PublicLangData.warning.inform.title,PublicLangData.warning.inform[a.state],"err")}e.addClass("btn-success").removeClass("btn-secondary").removeClass("disabled").val(PublicLangData.comment.submit.button)},error:function(t,e){connect_error(e)},timeout:timmeLimit})}})}}),$(document).on("click",".comment-row .comment-tools .comment-quote",function(){comment_quote=$(this).parents(".comment-tools").children(".comment-id").val();var t=$(this).parent().parent().parent().children(".comment-row-username").text(),e=$(this).parent().parent().parent().parent().children(".comment-row-userinfo").text(),a="[&nbsp;"+PublicLangData.comment.quote.button+"&nbsp;"+t+"&nbsp;("+e+')&nbsp;<span class="close"><i class="fas fa-times"></i></span>&nbsp;]';$("#comment-quote").html(a),$("#comment-quote .close").bind("click",function(){comment_quote=0,$("#comment-quote").html(""),$(".comment-row .comment-tools .comment-quote").parent().show()}),$(".comment-row .comment-tools .comment-quote").parent().show(),$(this).parent().hide(),$("html,body").animate({scrollTop:$(".comment-title").offset().top-200},450)}),$(document).on("click",".comment-channel-list li a",function(){if(!$(this).hasClass("active")){switch($(".comment-channel-list li a").removeClass("active"),$(this).addClass("active"),$(this).attr("data-channel-type").trim()){case"1":comment_channel="1",$.cookie("topicChannel",1,{expires:36500,path:"/"});break;case"2":comment_channel="2",$.cookie("topicChannel",2,{expires:36500,path:"/"});break;case"3":comment_channel="3",$.cookie("topicChannel",3,{expires:36500,path:"/"});break;default:return}get_comment(comment_container,comment_type)}}),$(document).on("click","#comment-submit",function(){if(!$(this).hasClass("disabled")){var t=editor.getContent().trim(),e=removeHtmlTag(t).length;if(e.length<3)return common_msg(PublicLangData.remind,PublicLangData.comment.submit.empty,"tip"),!1;if(e.length>5e3)return common_msg(PublicLangData.remind,PublicLangData.comment.submit.full,"tip"),!1;var a={todo:"submit"};a.type=comment_type,a.channel=comment_channel,a.container=comment_container,a.quote=comment_quote,a.text=t;var n=JSON.stringify(a),o=$.ajax({url:"//"+strStaticUrl+"/action/doComment/",async:!0,type:"post",data:{data:n},xhrFields:{withCredentials:!0},crossDomain:!0,beforeSend:function(){$("#comment-submit").removeClass("btn-success").addClass("btn-secondary").addClass("disabled").val(PublicLangData.loading+"..")},complete:function(){if(o.responseText){var t=$.parseJSON(o.responseText);0==t.state?(comment_nowpage=1,comment_quote=0,$("#comment-quote").html(""),editor.setContent("<p></p>"),get_comment(comment_container,comment_type)):common_msg(PublicLangData.warning.inform.title,PublicLangData.warning.inform[t.state],"err")}$("#comment-submit").addClass("btn-success").removeClass("btn-secondary").removeClass("disabled").val(PublicLangData.comment.submit.button)},error:function(t,e){connect_error(e)},timeout:timmeLimit})}}),$(document).on("click",".comment-row .comment-tools .comment-attitude",function(){var t=$(this).parents(".comment-tools").children(".comment-attitude-result"),e={todo:"attitude"};if(e.attitude_type=$(this).attr("data-type"),e.attitude_tid=$(this).parents(".comment-tools").children(".comment-id").val(),!e.attitude_type||!e.attitude_tid)return!1;var a=JSON.stringify(e),n=$.ajax({url:"//"+strStaticUrl+"/action/doComment/",async:!0,type:"post",data:{data:a},xhrFields:{withCredentials:!0},crossDomain:!0,beforeSend:function(){},complete:function(){if(n.responseText){var a=$.parseJSON(n.responseText);if(0==a.state)if(t.find("a[data-type='"+e.attitude_type+"']").hasClass("colourful"))t.find("a[data-type='"+e.attitude_type+"']").removeClass("colourful"),t.find("a[data-type='"+e.attitude_type+"']").children("span").text(parseInt(t.find("a[data-type='"+e.attitude_type+"']").children("span").text())-1),0==parseInt(t.find("a[data-type='"+e.attitude_type+"']").children("span").text())&&t.find("a[data-type='"+e.attitude_type+"']").parent().hide();else{var o=t.find(".comment-attitude.colourful");o.length>0&&(o.removeClass("colourful"),o.children("span").text(parseInt(o.children("span").text())-1)),t.find("a").each(function(){0==parseInt($(this).children("span").text())&&$(this).parent().hide()});var i=t.find("a[data-type='"+e.attitude_type+"']");i.parent().show(),i.addClass("colourful").children("span").text(parseInt(i.children("span").text())+1)}else common_msg(PublicLangData.warning.inform.title,PublicLangData.warning.inform[a.state],"err")}},error:function(t,e){connect_error(e)},timeout:timmeLimit})}),$(document).on("click",".comment-top",function(){swal({title:PublicLangData.comment.top.title,text:PublicLangData.comment.top.content,type:"question",confirmButtonText:PublicLangData.yes,cancelButtonText:PublicLangData.no,preConfirm:()=>{var t={todo:"top"};t.type=comment_type,t.channel=comment_channel,t.container=comment_container,t.top_id=$(this).parents(".comment-tools").children(".comment-id").val();var e=JSON.stringify(t);return new Promise(function(t,a){var n=$.ajax({url:"//"+strStaticUrl+"/action/doComment/",async:!0,type:"post",data:{data:e},xhrFields:{withCredentials:!0},crossDomain:!0,beforeSend:function(){swal.showLoading()},complete:function(){if(swal.hideLoading(),swal.close(),n.responseText){var t=$.parseJSON(n.responseText);0==t.state?(common_msg(PublicLangData.remind,PublicLangData.comment.top.complete,"ok"),get_comment(comment_container,comment_type)):common_msg(PublicLangData.warning.inform.title,PublicLangData.warning.inform[t.state],"err")}},error:function(t,e){connect_error(e)},timeout:timmeLimit})})},allowOutsideClick:()=>!Swal.isLoading(),allowEscapeKey:()=>!Swal.isLoading(),showCancelButton:()=>!Swal.isLoading()}).then(t=>{t.value&&swal.hideLoading()})}),$(document).on("click",".comment-delete",function(){var t=$(this).parents(".comment-reply-row").length>0?$(this).parents(".comment-reply-row"):$(this).parents(".comment-row");swal({title:PublicLangData.comment.delete.title,text:PublicLangData.comment.delete.content,type:"question",confirmButtonText:PublicLangData.yes,cancelButtonText:PublicLangData.no,preConfirm:()=>{var e={todo:"delete"};e.delete_id=$(this).parents(".comment-tools").children(".comment-id").val();var a=JSON.stringify(e);return new Promise(function(e,n){var o=$.ajax({url:"//"+strStaticUrl+"/action/doComment/",async:!0,type:"post",data:{data:a},xhrFields:{withCredentials:!0},crossDomain:!0,beforeSend:function(){swal.showLoading()},complete:function(){if(swal.hideLoading(),swal.close(),o.responseText){var e=$.parseJSON(o.responseText);0==e.state?(t.slideUp(),common_msg(PublicLangData.remind,PublicLangData.comment.delete.complete,"ok")):common_msg(PublicLangData.warning.inform.title,PublicLangData.warning.inform[e.state],"err")}},error:function(t,e){connect_error(e)},timeout:timmeLimit})})},allowOutsideClick:()=>!Swal.isLoading(),allowEscapeKey:()=>!Swal.isLoading(),showCancelButton:()=>!Swal.isLoading()}).then(t=>{t.value&&swal.hideLoading()})}),$(document).on("click",".comment-report",function(){swal({title:PublicLangData.comment.report.title,text:PublicLangData.comment.report.content,type:"question",input:"text",confirmButtonText:PublicLangData.submit,cancelButtonText:PublicLangData.cancel,preConfirm:()=>{},allowOutsideClick:()=>!Swal.isLoading(),allowEscapeKey:()=>!Swal.isLoading(),showCancelButton:()=>!Swal.isLoading()}).then(t=>{if(!t.dismiss)if(t.value){var e={todo:"report"};e.report_tid=$(this).parents(".comment-tools").children(".comment-id").val(),e.report_reason=t.value;var a=JSON.stringify(e),n=$.ajax({url:"//"+strStaticUrl+"/action/doComment/",async:!0,type:"post",data:{data:a},xhrFields:{withCredentials:!0},crossDomain:!0,beforeSend:function(){swal.showLoading()},complete:function(){if(swal.hideLoading(),swal.close(),n.responseText){var t=$.parseJSON(n.responseText);0==t.state?common_msg(PublicLangData.remind,PublicLangData.comment.report.complete,"ok"):common_msg(PublicLangData.warning.inform.title,PublicLangData.warning.inform[t.state],"err")}},error:function(t,e){connect_error(e)},timeout:timmeLimit})}else common_msg(PublicLangData.remind,PublicLangData.comment.report.empty,"err")})}),$(document).on("click","#comment-selfonly",function(){0==comment_selfonly?($("#comment-selfonly").html('<i class="fas fa-eye-slash"></i>'+PublicLangData.comment.selfonly.off),comment_selfonly=1):($("#comment-selfonly").html('<i class="fas fa-eye"></i>'+PublicLangData.comment.selfonly.open),comment_selfonly=0),comment_nowpage=1,get_comment(comment_container,comment_type)}),$(document).on("click",".comment-floor .common-pages[data-name='comment-list'] .page-link",function(){comment_nowpage=$(this).attr("data-page"),get_comment(comment_container,comment_type)}),$(document).on("click",".comment-floor .common-pages[data-name='comment-reply-list'] .page-link",function(){var t=$(this).attr("data-page");get_reply_comment($(this).parent().parent().parent(),$(this).parent().parent().parent().prev().children(".comment-id").val(),t,!1)}),$(document).on("click",".comment-row .fold",function(){var t=$(this).prev(".comment-row-text");$(this).text()==PublicLangData.comment.fold.down?(t.css("max-height","initial"),$(this).html('<i class="fas fa-chevron-up"></i>'+PublicLangData.comment.fold.up)):(t.css("max-height",""),$(this).html('<i class="fas fa-chevron-down"></i>'+PublicLangData.comment.fold.down))});