/*!
 * Lazy Load - JavaScript plugin for lazy loading images
 *
 * Copyright (c) 2007-2017 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   https://appelsiini.net/projects/lazyload
 *
 * Version: 2.0.0-beta.2
 *
 */
(function(a,b){if(typeof exports==="object"){module.exports=b(a)}else{if(typeof define==="function"&&define.amd){define([],b(a))}else{a.LazyLoad=b(a)}}})(typeof global!=="undefined"?global:this.window||this.global,function(a){const c={src:"data-src",srcset:"data-srcset",selector:".lazyload"};const e=function(){let extended={};let deep=false;let i=0;let length=arguments.length;if(Object.prototype.toString.call(arguments[0])==="[object Boolean]"){deep=arguments[0];i++}let merge=function(f){for(let prop in f){if(Object.prototype.hasOwnProperty.call(f,prop)){if(deep&&Object.prototype.toString.call(f[prop])==="[object Object]"){extended[prop]=e(true,extended[prop],f[prop])}else{extended[prop]=f[prop]}}}};for(;i<length;i++){let obj=arguments[i];merge(obj)}return extended};function d(f,g){this.settings=e(c,g||{});this.images=f||document.querySelectorAll(this.settings.selector);this.observer=null;this.init()}d.prototype={init:function(){if(!a.IntersectionObserver){this.loadImages();return}let self=this;let observerConfig={root:null,rootMargin:"0px",threshold:[0]};this.observer=new IntersectionObserver(function(f){f.forEach(function(g){if(g.intersectionRatio>0){self.observer.unobserve(g.target);self.loadImage(g.target)}})},observerConfig);this.images.forEach(function(f){self.observer.observe(f)})},loadAndDestroy:function(){if(!this.settings){return}this.loadImages();this.destroy()},loadImage:function(f){f.onerror=function(){f.onerror=null;f.src=f.srcset=f.dataset.error};let src=f.getAttribute(this.settings.src);let srcset=f.getAttribute(this.settings.srcset);if("img"===f.tagName.toLowerCase()){if(src){f.dataset.original=f.src;f.src=src}if(srcset){f.srcset=srcset}}else{f.style.backgroundImage="url("+src+")"}},loadImages:function(){if(!this.settings){return}let self=this;this.images.forEach(function(f){self.loadImage(f)})},destroy:function(){if(!this.settings){return}this.observer.disconnect();this.settings=null}};a.lazyload=function(f,g){return new d(f,g)};if(a.jQuery){const b=a.jQuery;b.fn.lazyload=function(f){f=f||{};f.attribute=f.attribute||"data-src";new d(b.makeArray(this),f);return this}}return d});
